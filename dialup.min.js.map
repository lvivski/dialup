{"version":3,"sources":["dialup.js"],"names":["global","Streamlet","Overtone","trimIce","server","replace","Channel","url","room","controller","control","stream","ws","WebSocket","send","message","data","type","JSON","stringify","onopen","onerror","onmessage","e","add","parse","this","onJoin","filter","onOffer","onAnswer","onCandidate","onNew","onPeers","onLeave","window","define","amd","streamlet","overtone","Dialup","module","exports","require","iceServers","reduce","servers","lastEntry","length","urls","push","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","channel","clientIds","connections","streams","addDataChannel","clientId","dc","id","onclose","createPeerConnection","pc","RTCPeerConnection","onicecandidate","candidate","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","console","log","ontrack","ondatachannel","onAdd","onData","broadcast","readyState","createStream","audio","video","navigator","mediaDevices","getUserMedia","then","connection","getTracks","forEach","track","addTrack","label","createDataChannel","createOffer","offer","setLocalDescription","description","localDescription","listen","you","addIceCandidate","splice","indexOf","setRemoteDescription","createAnswer","answer"],"mappings":"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"}