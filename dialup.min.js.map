{"version":3,"sources":["dialup.js"],"names":["global","Streamlet","Overtone","window","define","amd","streamlet","overtone","Dialup","module","exports","require","iceServers","reduce","servers","server","lastEntry","length","trimIce","urls","push","replace","url","room","sockets","connections","data","streams","controller","control","stream","ws","WebSocket","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","addDataChannel","id","channel","onopen","onmessage","e","add","type","onclose","createPeerConnection","pc","RTCPeerConnection","onicecandidate","candidate","send","label","sdpMLineIndex","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","console","log","ontrack","ondatachannel","event","JSON","stringify","onerror","parse","this","onOffer","filter","message","onAnswer","onCandidate","onNew","onPeers","onLeave","onAdd","onRemove","onData","broadcast","k","d","readyState","createStream","audio","video","navigator","mediaDevices","getUserMedia","then","socket","connection","getTracks","forEach","track","addTrack","createDataChannel","createOffer","session","setLocalDescription","description","sdp","listen","i","you","RTCIceCandidate","addIceCandidate","catch","splice","indexOf","setRemoteDescription","RTCSessionDescription","createAnswer"],"mappings":"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"}