{"version":3,"sources":["dialup.js"],"names":["global","Streamlet","Overtone","trimIce","server","replace","Channel","url","room","controller","control","stream","ws","WebSocket","send","message","data","type","JSON","stringify","onopen","onerror","onmessage","e","add","parse","this","onOffer","filter","onAnswer","onCandidate","onNew","onPeers","onLeave","window","define","amd","streamlet","overtone","Dialup","module","exports","require","iceServers","reduce","servers","lastEntry","length","urls","push","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","channel","sockets","connections","streams","addDataChannel","socket","id","onclose","createPeerConnection","pc","RTCPeerConnection","onicecandidate","candidate","label","sdpMLineIndex","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","console","log","ontrack","ondatachannel","onAdd","onData","broadcast","dataConnection","readyState","createStream","audio","video","navigator","mediaDevices","getUserMedia","then","connection","getTracks","forEach","track","addTrack","createDataChannel","createOffer","offer","setLocalDescription","description","localDescription","listen","you","RTCIceCandidate","addIceCandidate","splice","indexOf","setRemoteDescription","createAnswer","answer"],"mappings":"CAAA,SAAUA,gBAKR,IAAIC,EAAWC,EAoCf,SAASC,EAAQC,GACf,OAAOA,EAAOC,QAAQ,aAAc,IAAIA,QAAQ,QAAS,IAE3D,SAASC,EAAQC,EAAKC,GACpB,MAAMC,EAAaR,EAAUS,UACvBC,EAASF,EAAWE,OACpBC,EAAK,IAAIC,UAAUN,GAUzB,SAASO,EAAKC,EAASC,GACrBA,EAAKC,KAAOF,EACZH,EAAGE,KAAKI,KAAKC,UAAUH,IAXzBJ,EAAGQ,OAAS,WACVN,EAAK,OAAQ,CACXN,KAAMA,GAAQ,MAGlBI,EAAGS,QAAU,aACbT,EAAGU,UAAY,SAASC,GACtBd,EAAWe,IAAIN,KAAKO,MAAMF,EAAEP,QAM9BU,KAAKZ,KAAOA,EACZY,KAAKC,QAAUhB,EAAOiB,OAAOb,GAA4B,UAAjBA,EAAQE,MAChDS,KAAKG,SAAWlB,EAAOiB,OAAOb,GAA4B,WAAjBA,EAAQE,MACjDS,KAAKI,YAAcnB,EAAOiB,OAAOb,GAA4B,cAAjBA,EAAQE,MACpDS,KAAKK,MAAQpB,EAAOiB,OAAOb,GAA4B,QAAjBA,EAAQE,MAC9CS,KAAKM,QAAUrB,EAAOiB,OAAOb,GAA4B,UAAjBA,EAAQE,MAChDS,KAAKO,QAAUtB,EAAOiB,OAAOb,GAA4B,UAAjBA,EAAQE,MAjE5B,iBAAXjB,IACTA,EAASkC,QAGW,mBAAXC,QAAyBA,OAAOC,IACzCD,OAAO,CAAE,YAAa,YAAc,SAASE,EAAWC,GAGtD,OAFArC,EAAYoC,EACZnC,EAAWoC,EACJC,IAKTrC,EAH2B,iBAAXsC,QAAuBA,OAAOC,SAC9CD,OAAOC,QAAUF,EACjBtC,EAAYyC,QAAQ,aACTA,QAAQ,cAEnB1C,EAAOuC,OAASA,EAChBtC,EAAYD,EAAOC,UACRD,EAAOE,UAGhByC,EADc,CAAE,0BAA2B,2BAA4B,2BAA4B,2BAA4B,2BAA4B,iBAAkB,mBAAoB,qBAAsB,kBAAmB,6BAA8B,sBAAuB,sBAAuB,qBAAsB,sBACnTC,OAAO,SAASC,EAASzC,GACpD,IAAI0C,EAAYD,EAAQA,EAAQE,OAAS,GAgBzC,OAfA3C,EAAS,QAAUA,EACf0C,GAEE3C,EADa2C,EAAUE,KAAK,MACJ7C,EAAQC,GAClC0C,EAAUE,KAAKC,KAAK7C,GAOtByC,EAAQI,KAAK,CACXD,KAAM,CAAE5C,KAGLyC,GACN,IA6BH,MAAMK,EAAc,CAClBC,qBAAqB,EACrBC,qBAAqB,GAEjBC,EAAgB,CACpBV,WAAYA,GAEd,SAASJ,EAAOhC,EAAKC,GAEnB,MAAM8C,EAAU,IAAIhD,EAAQC,EAAKC,GAC3B+C,EAAU,GACVC,EAAc,GACdxC,EAAO,GACPyC,EAAU,GACVhD,EAAaR,EAAUS,UACvBC,EAASF,EAAWE,OAqG1B,SAAS+C,EAAeC,EAAQL,GAC9BA,EAAQlC,OAAS,aACjBkC,EAAQhC,UAAY,SAASC,GAC3Bd,EAAWe,IAAI,CACboC,GAAID,EACJ1C,KAAM,OACND,KAAMO,EAAEP,QAGZsC,EAAQO,QAAU,aAClB7C,EAAK2C,GAAUL,EAEjB,SAASQ,EAAqBH,GAC5B,MAAMI,EAAK,IAAIC,kBAAkBX,GAmCjC,OAlCAU,EAAGE,eAAiB,SAAS1C,GACvBA,EAAE2C,WAAa3C,EAAE2C,UAAUA,WAC7BZ,EAAQxC,KAAK,YAAa,CACxB8C,GAAID,EACJQ,MAAO5C,EAAE2C,UAAUE,cACnBF,UAAW3C,EAAE2C,UAAUA,aAI7BH,EAAGM,2BAA6B,WAC9B,OAAQN,EAAGO,oBACV,IAAK,eACL,IAAK,SACJP,EAAGQ,QACH,MAED,IAAK,YACJR,EAAGE,eAAiB,eAIxBF,EAAGS,oBAAsB,SAASjD,GAChCkD,QAAQC,IAAInD,IAEdwC,EAAGY,QAAU,SAASpD,GACpBd,EAAWe,IAAI,CACboC,GAAID,EACJ1C,KAAM,MACNN,OAAQY,EAAEkC,QAAQ,MAGtBM,EAAGa,cAAgB,SAASrD,GAC1BmC,EAAeC,EAAQpC,EAAE+B,UAEpBS,EApJTrC,KAAKmD,MAAQlE,EAAOiB,OAAOb,GAA4B,QAAjBA,EAAQE,MAC9CS,KAAKoD,OAASnE,EAAOiB,OAAOb,GAA4B,SAAjBA,EAAQE,MAC/CS,KAAKM,QAAUsB,EAAQtB,QACvBN,KAAKO,QAAUqB,EAAQrB,QACvBP,KAAKqD,UAAY,SAAShE,GACxB,IAAK,MAAM4C,KAAU3C,EACnBU,KAAKZ,KAAK6C,EAAQ5C,IAGtBW,KAAKZ,KAAO,SAAS6C,EAAQ5C,GAC3B,MAAMiE,EAAiBhE,EAAK2C,GACM,SAA9BqB,EAAeC,YACjBD,EAAelE,KAAKC,IAGxBW,KAAKwD,aAAe,SAASC,EAAOC,GAClC,OAAOC,UAAUC,aAAaC,aAAa,CACzCJ,MAAOA,EACPC,MAAOA,IACNI,KAAK,SAAS7E,GACfT,EAAS0B,OAAOjB,GAChB8C,EAAQR,KAAKtC,GACb,IAAK,MAAMgD,KAAUJ,EACnBC,EAAYG,GAAUG,EAAqBH,GAE7C,IAAK,MAAMhD,KAAU8C,EACnB,IAAK,MAAME,KAAUH,EAAa,CAChC,MAAMiC,EAAajC,EAAYG,GAC/BhD,EAAO+E,YAAYC,QAAQ,SAASC,GAClCH,EAAWI,SAASD,EAAOjF,KAIjC,IAAK,MAAMgD,KAAUH,EAAa,CAChC,IAAMiC,EAAajC,EAAYG,GA6DVA,EA5DHA,EA6DZQ,GAD2BA,OA5DjC2B,IA6Dc,cACZxC,EA9DwBmC,EA8DXK,kBAAkB3B,SACrCT,EAAeC,EAAQL,GAfzB,SAAqBK,EAAQI,GAC3BA,EAAGgC,YAAY7C,GAAasC,KAAKQ,GAASjC,EAAGkC,oBAAoBD,IAAQR,KAAK,IAAMlC,EAAQxC,KAAK,QAAS,CACxG8C,GAAID,EACJuC,YAAanC,EAAGoC,mBACd,cAnDAJ,CAAYpC,EAAQ8B,GA2D1B,IAA2B9B,EAAYQ,EAzDnC,OAAOxD,KAGX2C,EAAQtB,QAAQoE,OAAO,SAASrF,GACzBA,EAAQsF,IACb,IAAK,MAAM1C,KAAU5C,EAAQyC,YAC3BD,EAAQN,KAAKU,KAGjBL,EAAQxB,YAAYsE,OAAO,SAASrF,GAClC,IAAM4C,EAAS5C,EAAQ6C,GACjBM,EAAY,IAAIoC,gBAAgB,CACpClC,cAAerD,EAAQoD,MACvBD,UAAWnD,EAAQmD,YAErBV,EAAYG,GAAQ4C,gBAAgBrC,KAEtCZ,EAAQvB,MAAMqE,OAAO,SAASrF,GACtB4C,EAAS5C,EAAQ6C,GACvB,MAAMG,EAAKD,EAAqBH,GAChCJ,EAAQN,KAAKU,GACbH,EAAYG,GAAUI,EACtBN,EAAQkC,QAAQ,SAAShF,GACvBA,EAAO+E,YAAYC,QAAQ,SAASC,GAClC7B,EAAG8B,SAASD,EAAOjF,SAIzB2C,EAAQrB,QAAQmE,OAAO,SAASrF,GACxB4C,EAAS5C,EAAQ6C,UAChBJ,EAAYG,UACZ3C,EAAK2C,GACZJ,EAAQiD,OAAOjD,EAAQkD,QAAQ9C,GAAS,KAE1CL,EAAQ3B,QAAQyE,OAAO,SAASrF,GAC9B,IAgBoB4C,EAAQI,EAhBtBJ,EAAS5C,EAAQ6C,GACvB,MAAMG,EAAKP,EAAYG,GACvBI,EAAG2C,qBAAqB3F,EAAQmF,aAcZvC,EAbPA,GAaeI,EAbPA,GAclB4C,eAAenB,KAAKoB,GAAU7C,EAAGkC,oBAAoBW,IAASpB,KAAK,IAAMlC,EAAQxC,KAAK,SAAU,CACjG8C,GAAID,EACJuC,YAAanC,EAAGoC,mBACd,gBAfN7C,EAAQzB,SAASuE,OAAO,SAASrF,GAC/B,IAAM4C,EAAS5C,EAAQ6C,GACvB,MAAMG,EAAKP,EAAYG,GACvBI,EAAG2C,qBAAqB3F,EAAQmF,gBAtKtC,CA4OGxE"}