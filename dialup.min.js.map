{"version":3,"file":"dialup.min.js","sources":["dialup.js"],"names":["global","nextTick","next","buffer","length","tick","enqueue","fn","push","execute","i","undefined","Array","setImmediate","process","postMessage","message","onMessage","e","data","stopPropagation","addEventListener","attachEvent","setTimeout","define","amd","module","exports","subsequent","this","Promise","value","deferreds","resolve","deferred","type","promise","isFunction","fulfill","reject","defer","isObject","obj","require","Davy","prototype","isFulfilled","isRejected","then","onFulfill","onReject","SUCCESS","FAILURE","isResolved","TypeError","self","call","val","err","complete","error","all","args","remaining","slice","arguments","isArray","Stream","listeners","handle","listener","StreamTransformer","source","listen","add","bind","MapStream","convert","FilterStream","test","ExpandStream","expand","TakeStream","count","SkipStream","EventStream","element","event","stream","map","Object","create","filter","take","skip","window","on","Node","Dialup","url","room","createOffer","socket","pc","session","setLocalDescription","send","id","parseInt","description","sdp","createAnswer","createDataChannel","label","channel","reliable","addDataChannel","onopen","onmessage","onclose","createPeerConnection","RTCPeerConnection","iceServers","optional","RtpDataChannels","DtlsSrtpKeyAgreement","onicecandidate","candidate","sdpMLineIndex","onaddstream","onremovestream","ondatachannel","JSON","stringify","me","sockets","connections","streams","WebSocket","onerror","parse","onOffer","onAnswer","onCandidate","onNew","onPeers","onLeave","onAdd","onRemove","onData","k","d","createStream","audio","video","getUserMedia","connection","addStream","you","RTCIceCandidate","addIceCandidate","forEach","setRemoteDescription","RTCSessionDescription","navigator","PeerConnection","webkitPeerConnection00","webkitRTCPeerConnection","mozRTCPeerConnection","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","noop","mozRTCIceCandidate","mozRTCSessionDescription","URL","webkitURL","msURL"],"mappings":"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"}