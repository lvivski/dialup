{"version":3,"sources":["dialup.js"],"names":["global","Observable","Promise","Audio","window","define","amd","streamlet","davy","overtone","Dialup","module","exports","require","Streamlet","Davy","Overtone","iceServers","reduce","servers","server","lastEntry","length","trimIce","urls","push","replace","url","room","sockets","connections","data","streams","controller","control","stream","ws","WebSocket","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","addDataChannel","id","channel","onopen","onmessage","e","add","type","onclose","createPeerConnection","console","log","pc","RTCPeerConnection","onicecandidate","candidate","send","label","sdpMLineIndex","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","ontrack","ondatachannel","event","JSON","stringify","onerror","parse","this","onOffer","filter","message","onAnswer","onCandidate","onNew","onPeers","onLeave","onAdd","onRemove","onData","broadcast","k","d","readyState","createStream","audio","video","defer","navigator","mediaDevices","getUserMedia","then","i","socket","connection","getTracks","forEach","track","addTrack","createDataChannel","createOffer","session","setLocalDescription","description","sdp","fulfill","promise","listen","you","RTCIceCandidate","addIceCandidate","catch","splice","indexOf","setRemoteDescription","RTCSessionDescription","createAnswer"],"mappings":"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"}