{"version":3,"sources":["dialup.js"],"names":["global","Streamlet","Overtone","trimIce","server","replace","Channel","url","room","controller","control","stream","ws","WebSocket","send","message","data","type","JSON","stringify","onopen","onerror","onmessage","e","add","parse","this","onJoin","filter","onOffer","onAnswer","onPeers","onNew","onCandidate","onLeave","window","define","amd","streamlet","overtone","Dialup","module","exports","require","iceServers","reduce","servers","lastEntry","length","urls","push","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","channel","clientIds","streams","peerConnections","dataChannels","senders","addTracks","clientId","pc","getTracks","forEach","track","addTrack","addDataChannel","dc","id","onclose","createPeerConnection","RTCPeerConnection","onicecandidate","candidate","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","console","log","onnegotiationneeded","createOffer","then","offer","setLocalDescription","description","localDescription","ontrack","ondatachannel","onAdd","onData","broadcast","readyState","getUserStream","audio","video","navigator","mediaDevices","getUserMedia","facingMode","getDisplayStream","getDisplayMedia","stopStream","stop","listen","you","connections","label","createDataChannel","addIceCandidate","splice","indexOf","setRemoteDescription","createAnswer","answer"],"mappings":"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"}