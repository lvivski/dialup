{"version":3,"sources":["dialup.js"],"names":["global","Streamlet","Overtone","window","define","amd","streamlet","overtone","Dialup","module","exports","require","iceServers","reduce","servers","server","lastEntry","length","trimIce","urls","push","replace","url","room","sockets","connections","data","streams","controller","control","stream","ws","WebSocket","constraints","offerToReceiveAudio","offerToReceiveVideo","configuration","addDataChannel","socket","channel","onopen","onmessage","e","add","id","type","onclose","createPeerConnection","pc","RTCPeerConnection","onicecandidate","candidate","send","label","sdpMLineIndex","oniceconnectionstatechange","iceConnectionState","close","onicecandidateerror","console","log","ontrack","ondatachannel","event","JSON","stringify","onerror","parse","this","onOffer","filter","message","onAnswer","onCandidate","onNew","onPeers","onLeave","onAdd","onData","broadcast","k","d","readyState","createStream","audio","video","navigator","mediaDevices","getUserMedia","then","connection","getTracks","forEach","track","addTrack","createDataChannel","createOffer","offer","setLocalDescription","description","sdp","listen","you","RTCIceCandidate","addIceCandidate","splice","indexOf","setRemoteDescription","RTCSessionDescription","createAnswer","answer"],"mappings":"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"}